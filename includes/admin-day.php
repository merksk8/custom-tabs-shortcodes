<?php 	//--- FORM MANAGEMENT START---	$colors = get_option('cts_color_defaults');	if(isset($_POST["submit"]) && isset($_POST["th_nonce_variable"]) && wp_verify_nonce($_POST["th_nonce_variable"], 'th_nonce_admin')){		if( isset($_POST["lunes"] ) ){update_option('cts_lunes', intval(sanitize_text_field($_POST['lunes'])));}		if( isset($_POST["martes"] ) ){update_option('cts_martes', intval(sanitize_text_field($_POST['martes'])));}		if( isset($_POST["miercoles"] ) ){update_option('cts_miercoles', intval(sanitize_text_field($_POST['miercoles'])));}		if( isset($_POST["jueves"] ) ){update_option('cts_jueves', intval(sanitize_text_field($_POST['jueves'])));}		if( isset($_POST["viernes"] ) ){update_option('cts_viernes', intval(sanitize_text_field($_POST['viernes'])));}		if( isset($_POST["sabado"] ) ){update_option('cts_sabado', intval(sanitize_text_field($_POST['sabado'])));}		if( isset($_POST["domingo"] ) ){ update_option('cts_domingo', intval(sanitize_text_field($_POST['domingo']))); }		if(isset($_POST["th_delete"]) ){update_option('cts_delete', "1");}else{update_option('cts_delete', "0");	}		$options = array();		if( isset($_POST['td_background']) && !empty($_POST['td_background']) ){ $options["td_background"] =  sanitize_hex_color($_POST['td_background']); }else{ $options["td_background"] = sanitize_hex_color($colors["td_background"]); }		if( isset($_POST['td_text']) && !empty($_POST['td_text']) ){ $options["td_text"] =  sanitize_hex_color($_POST['td_text']); }else{ $options["td_text"] = sanitize_hex_color($colors["td_text"]); }		if( isset($_POST['td_hover']) && !empty($_POST['td_hover']) ){ $options["td_hover"] =  sanitize_hex_color($_POST['td_hover']); }else{ $options["td_hover"] = sanitize_hex_color($colors["td_hover"]); }		if( isset($_POST['td_icon']) && !empty($_POST['td_icon']) ){ $options["td_icon"] =  sanitize_hex_color($_POST['td_icon']); }else{ $options["td_icon"] = sanitize_hex_color($colors["td_icon"]); }		if( isset($_POST['td_active']) && !empty($_POST['td_active']) ){ $options["td_active"] =  sanitize_hex_color($_POST['td_active']); }else{ $options["td_active"] = sanitize_hex_color($colors["td_active"]); }		update_option('cts_config', $options);		$icons = array();		if( isset($_POST['td_icon_lunes']) ) { $icons["td_icon_lunes"] = sanitize_text_field($_POST['td_icon_lunes']); }		if( isset($_POST['td_icon_martes']) ){ $icons["td_icon_martes"] = sanitize_text_field($_POST['td_icon_martes']); }		if( isset($_POST['td_icon_miercoles']) ){ $icons["td_icon_miercoles"] = sanitize_text_field($_POST['td_icon_miercoles']); }		if( isset($_POST['td_icon_jueves']) ){ $icons["td_icon_jueves"] = sanitize_text_field($_POST['td_icon_jueves']); }		if( isset($_POST['td_icon_viernes']) ){ $icons["td_icon_viernes"] = sanitize_text_field($_POST['td_icon_viernes']); }		if( isset($_POST['td_icon_sabado']) ){ $icons["td_icon_sabado"] = sanitize_text_field($_POST['td_icon_sabado']); }		if( isset($_POST['td_icon_domingo']) ){ $icons["td_icon_domingo"] = sanitize_text_field($_POST['td_icon_domingo']); }		update_option('cts_icons', $icons);	}	//---FORM MANAGEMENT END---	$icons = get_option('cts_icons');	if( isset($icons['td_icon_lunes']) ) { $icons["td_icon_lunes"] = esc_attr($icons['td_icon_lunes']); }else{ $icons["td_icon_lunes"] = " "; }	if( isset($icons['td_icon_martes']) ){ $icons["td_icon_martes"] = esc_attr($icons['td_icon_martes']); }else{ $icons["td_icon_martes"] = " "; }	if( isset($icons['td_icon_miercoles']) ){ $icons["td_icon_miercoles"] = esc_attr($icons['td_icon_miercoles']); }else{ $icons["td_icon_miercoles"] = " "; }	if( isset($icons['td_icon_jueves']) ){ $icons["td_icon_jueves"] = esc_attr($icons['td_icon_jueves']); }else{ $icons["td_icon_jueves"] = " "; }	if( isset($icons['td_icon_viernes']) ){ $icons["td_icon_viernes"] = esc_attr($icons['td_icon_viernes']); }else{ $icons["td_icon_viernes"] = " "; }	if( isset($icons['td_icon_sabado']) ){ $icons["td_icon_sabado"] = esc_attr($icons['td_icon_sabado']); }else{ $icons["td_icon_sabado"] = " "; }	if( isset($icons['td_icon_domingo']) ){ $icons["td_icon_domingo"] = esc_attr($icons['td_icon_domingo']); }else{ $icons["td_icon_domingo"] = " "; }	//CARGAR OPCIONES	$options = get_option('cts_config', $colors);	if(!empty($options["td_background"]) ){ $colors["td_background"] = $options["td_background"]; }	if(!empty($options["td_text"]) ){ $colors["td_text"] = $options["td_text"]; }	if(!empty($options["td_active"]) ){ $colors["td_active"] = $options["td_active"]; }	if(!empty($options["td_hover"]) ){ $colors["td_hover"] = $options["td_hover"]; }	if(!empty($options["td_icon"]) ){ $colors["td_icon"] = $options["td_icon"]; }	//SCRIPTS PARA COLOR PICKER	if(!wp_style_is('wp-color-picker','enqueued')){wp_enqueue_style( 'wp-color-picker' );}	if(!wp_script_is('wp-color-picker','enqueued')){wp_enqueue_script( 'wp-color-picker' );}	//LIBRERIA ICONOS	$css = plugins_url( '/lib/icon-picker/css/dashicons-picker.css', __FILE__ );    if(!wp_style_is('dashicons-picker','enqueued')){wp_enqueue_style( 'dashicons-picker', $css, array( 'dashicons' ), '1.0' );}	$js = plugins_url( '/lib/icon-picker/js/dashicons-picker.js', __FILE__ );	if(!wp_script_is('dashicons-picker','enqueued')){wp_enqueue_script( 'dashicons-picker', $js, array( 'jquery' ), '1.0', true );}	//LIBRERIA ICONOS WORDPRESS	if(!wp_style_is('dashicons','enqueued')){wp_enqueue_style( 'dashicons');}	?>		<style>			input[type=checkbox]{				border-radius: 30px;				background-color: whitesmoke;				    min-width: 28px;					width: 3px;					height: 7px;					min-height: 23px;			}			input[type=checkbox]:checked:before{				color:black;				font-size: 30px;			}			.tab-menu-ul{				width:98% !important;				margin-top: 5px;			}			.tab-content{				border: none !important;				padding: 0% !important;				padding-top: 4% !important;				width: 98% !important;			}		</style>		<style id="css-icons">			.tab-menu-dias .dashicons, .tab-menu-dias.dashicons-before:before{				color: <?php echo esc_attr($colors["td_icon"]); ?> !important;			}		</style>		<style id="css-background">			.tab-menu-ul{				background-color: <?php echo esc_attr($colors["td_background"]); ?> !important;			}		</style>		<style id="css-hover">			.tab-menu-li a:hover{				background-color: <?php echo esc_attr($colors["td_hover"]); ?> !important;			}		</style>		<style id="css-text">			.tab-menu-li a:hover, .tab-menu-li a:focus, .tab-menu-ul, .tab-menu-li a{				color: <?php echo esc_attr($colors["td_text"]); ?> !important;			}		</style>		<style id="css-active">			.tab-menu-container > .tab-menu-ul{				border-bottom-color:<?php echo esc_attr($colors["td_active"]); ?> !important;			}			.tab-content{				border-color: <?php echo esc_attr($colors["td_active"]); ?> !important;			}		</style>		<div id="999" class="tab-menu-container" data-color="<?php echo esc_attr($colors["td_active"]);?>">		<ul class="tab-menu-ul" id="tab-menu-ul">			<li id="0" class="tab-menu-li active"><a id="0" class="tab-menu-dias tab-dias" href="#" ><?php _e('Tab por dia', 'tdlang'); ?></a></li>			<li id="1" class="tab-menu-li"><a id="1" class="tab-menu-dias tab-dias" href="#" ><?php _e('Custom Tabs', 'tdlang'); ?></a></li>		</ul>		</div>		<div class="tab-content 999 icon-manager" id="0" data-id="999" style="display:none;">			<hr>			<center><h3> <?php _e('Configurar tabs por dÃ­a', 'tdlang'); ?></h3></center>			<p><?php _e('Selecciona un post para cada dia, se utilizara el contenido del post como contenido del tab, el shortcode es:', 'tdlang'); ?> <code>[TD_DAILY]</code></p>			<hr>			<form action="" method="post" style="margin-left:1%">						<div class="form-container">				<h4><?php _e('Lunes', 'tdlang'); ?></h4>				<hr>				<p><?php _e('Pagina', 'tdlang'); ?>				<p><?php wp_dropdown_pages( $args = array( 'name' => 'lunes', 'show_option_none' => false, 'class' => 'widefat', 'selected' => esc_html(get_option('cts_lunes')) ) ); ?>				<p><?php _e('Icono', 'tdlang'); ?>				<p><span class="dashicons-before <?php echo $icons["td_icon_lunes"]; ?>" name="td_icon_lunes"></span>				<p><input class="icon-input" id="td_icon_lunes" name="td_icon_lunes" type="text" value="<?php echo $icons["td_icon_lunes"]; ?>" />				<input class="button dashicons-picker" type="button" value="<?php _e('Elegir', 'tdlang'); ?>" data-id="0" data-checked="true" data-target="#td_icon_lunes" />			</div><div class="form-container">				<h4><?php _e('Martes', 'tdlang'); ?></h4>				<hr>				<p><?php _e('Pagina', 'tdlang'); ?>				<p><?php wp_dropdown_pages( $args = array( 'name' => 'martes', 'show_option_none' => false, 'class' => 'widefat', 'selected' => esc_html(get_option('cts_martes')) ) ); ?>				<p><?php _e('Icono', 'tdlang'); ?>				<p><span class="dashicons-before <?php echo $icons["td_icon_martes"]; ?>" name="td_icon_martes"></span>				<p><input class="icon-input" id="td_icon_martes" name="td_icon_martes" type="text" value="<?php echo $icons["td_icon_martes"]; ?>" />				<input class="button dashicons-picker" type="button" value="<?php _e('Elegir', 'tdlang'); ?>" data-id="1" data-checked="true" data-target="#td_icon_martes" />			</div><div class="form-container">				<h4><?php _e('Miercoles', 'tdlang'); ?></h4>				<hr>				<p><?php _e('Pagina', 'tdlang'); ?>				<p><?php wp_dropdown_pages( $args = array( 'name' => 'miercoles', 'show_option_none' => false, 'class' => 'widefat', 'selected' => esc_html(get_option('cts_miercoles')) ) ); ?> 				<p><?php _e('Icono', 'tdlang'); ?>				<p><span class="dashicons-before <?php echo $icons["td_icon_miercoles"]; ?>" name="td_icon_miercoles"></span>				<p><input class="icon-input" id="td_icon_miercoles" name="td_icon_miercoles" type="text" value="<?php echo $icons["td_icon_miercoles"]; ?>" />				<input class="button dashicons-picker" type="button" value="<?php _e('Elegir', 'tdlang'); ?>" data-id="2" data-checked="true" data-target="#td_icon_miercoles" />			</div><div class="form-container">				<h4><?php _e('Jueves', 'tdlang'); ?></h4>				<hr>				<p><?php _e('Pagina', 'tdlang'); ?>				<p><?php wp_dropdown_pages( $args = array( 'name' => 'jueves', 'show_option_none' => false, 'class' => 'widefat', 'selected' => esc_html(get_option('cts_jueves')) ) ); ?>				<p><?php _e('Icono', 'tdlang'); ?>				<p><span class="dashicons-before <?php echo $icons["td_icon_jueves"]; ?>" name="td_icon_jueves"></span>				<p><input class="icon-input" id="td_icon_jueves" name="td_icon_jueves" type="text" value="<?php echo $icons["td_icon_jueves"]; ?>" />				<input class="button dashicons-picker" type="button" value="<?php _e('Elegir', 'tdlang'); ?>" data-id="3" data-checked="true" data-target="#td_icon_jueves" />			</div><div class="form-container">				<h4><?php _e('Viernes', 'tdlang'); ?></h4>				<hr>				<p><?php _e('Pagina', 'tdlang'); ?>				<p><?php wp_dropdown_pages( $args = array( 'name' => 'viernes', 'show_option_none' => false, 'class' => 'widefat', 'selected' => esc_html(get_option('cts_viernes')) ) ); ?>				<p><?php _e('Icono', 'tdlang'); ?>				<p><span class="dashicons-before <?php echo $icons["td_icon_viernes"]; ?>" name="td_icon_viernes"></span>				<p><input class="icon-input" id="td_icon_viernes" name="td_icon_viernes" type="text" value="<?php echo $icons["td_icon_viernes"]; ?>" />				<input class="button dashicons-picker" type="button" value="<?php _e('Elegir', 'tdlang'); ?>" data-id="4" data-checked="true" data-target="#td_icon_viernes" />			</div><div class="form-container">				<h4><?php _e('Sabado', 'tdlang'); ?></h4>				<hr>				<p><?php _e('Pagina', 'tdlang'); ?>				<p><?php wp_dropdown_pages( $args = array( 'name' => 'sabado', 'show_option_none' => false, 'class' => 'widefat', 'selected' => esc_html(get_option('cts_sabado')) ) ); ?>				<p><?php _e('Icono', 'tdlang'); ?>				<p><span class="dashicons-before <?php echo $icons["td_icon_sabado"]; ?>" name="td_icon_sabado"></span>				<p><input class="icon-input" id="td_icon_sabado" name="td_icon_sabado" type="text" value="<?php echo $icons["td_icon_sabado"]; ?>" />				<input class="button dashicons-picker" type="button" value="<?php _e('Elegir', 'tdlang'); ?>" data-id="5" data-checked="true" data-target="#td_icon_sabado" />			</div><div class="form-container">				<h4><?php _e('Domingo', 'tdlang'); ?></h4>				<hr>				<p><?php _e('Pagina', 'tdlang'); ?>				<p><?php wp_dropdown_pages( $args = array( 'name' => 'domingo', 'show_option_none' => false, 'class' => 'widefat', 'selected' => esc_html(get_option('cts_domingo')) ) ); ?>				<p><?php _e('Icono', 'tdlang'); ?>				<p><span class="dashicons-before <?php echo $icons["td_icon_domingo"]; ?>" name="td_icon_domingo"></span>				<p><input class="icon-input" id="td_icon_domingo" name="td_icon_domingo" type="text" value="<?php echo $icons["td_icon_domingo"]; ?>" />				<input class="button dashicons-picker" type="button" value="<?php _e('Elegir', 'tdlang'); ?>" data-id="6" data-checked="true" data-target="#td_icon_domingo" />			</div>			<hr>			<p> <?php _e('Color de fondo', 'tdlang'); ?>			<p><input type="text" id="td_background" name="td_background" value="<?php echo esc_attr($colors["td_background"]); ?>" class="color_picker" />			<p> <?php _e('Color de texto', 'tdlang'); ?>			<p><input type="text" id="td_text" name="td_text" value="<?php echo esc_attr($colors["td_text"]); ?>" class="color_picker" />			<p> <?php _e('Color de Activo', 'tdlang'); ?>			<p><input type="text" id="td_active" name="td_active" value="<?php echo esc_attr($colors["td_active"]); ?>" class="color_picker" />			<p> <?php _e('Color de hover', 'tdlang'); ?>			<p><input type="text" id="td_hover" name="td_hover" value="<?php echo esc_attr($colors["td_hover"]); ?>" class="color_picker" />			<p> <?php _e('Color de iconos', 'tdlang'); ?>			<p><input type="text" id="td_icon" name="td_icon" value="<?php echo esc_attr($colors["td_icon"]); ?>" class="color_picker" />			<hr>		</div>		<div class="tab-content 999" id="1" data-id="999" style="display:none;">			<hr>			<center><h3><?php _e('Opciones generales shortcode variable', 'tdlang'); ?> </h3></center>			<p><?php _e('Configuracion de los TabShortcodes(admin)', 'tdlang'); ?>			<hr>			<p><input type="checkbox" id="th_delete" name="th_delete" value="1" <?php if ( 1 == get_option('cts_delete') ){echo 'checked="checked"';} ?>  /> 			<?php _e('Borrar datos al desinstalar', 'tdlang'); ?>			<hr>		</div>			<?php wp_nonce_field('th_nonce_admin','th_nonce_variable'); ?>		<center><p><button type="submit" name="submit" id="submit" style="width:70%" class="button button-primary"> <?php _e('Guardar', 'tdlang'); ?> </button></center>		</form>	<?php 		if(!wp_script_is('cambiar_tab_dia','enqueued')){wp_enqueue_script('tab_variabe_manager', plugins_url( '/js/tab-variable-manager.js', __FILE__ ));}		if(wp_script_is('tab_variabe_manager','enqueued')){wp_localize_script('tab_variabe_manager', 'colors_default_admin', get_option('cts_color_defaults'));}		//SCRIPTS PROPIOS		if(!wp_style_is('cambiar_tab_dia','enqueued')){wp_enqueue_style('tabs_css_style', plugins_url( '/css/tab-variable-style.css', __FILE__ ));}		if(!wp_script_is('cambiar_tab_dia','enqueued')){wp_enqueue_script('cambiar_tab_dia', plugins_url( '/js/tab-manager.js', __FILE__ ));}		if(wp_script_is('cambiar_tab_dia','enqueued')){wp_localize_script('cambiar_tab_dia', 'colors_default', get_option('cts_color_defaults'));}		if(wp_script_is('tab_variabe_manager','enqueued')){wp_localize_script('tab_variabe_manager', 'th_data' , array( "nonce"=> wp_create_nonce('th_admin'), __("Elegir", "tdlang") ) );}		if(wp_script_is('tab_variabe_manager','enqueued')){wp_localize_script('tab_variabe_manager', 'config_options' , array( "loadPosts"=> 0 ) );}	?>